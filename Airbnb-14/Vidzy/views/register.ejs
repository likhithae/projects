<%- include('partials/header') %>

  <div class="container mb-5 mt-5 p-5">
    <div class="container h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-lg-12 col-xl-11">
          <div class="card text-black" style="border-radius: 25px;">
            <div class="card-body p-md-5">
              <div class="row justify-content-center">
                <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                  <%if (message & message=='1' ){%>
                    <div class="alert alert-danger">This email already exists. Instead, Please <a
                        href="/login">Login</a>
                    </div>
                    <%}%>
                      <%if (message & message=='2' ){%>
                        <div class="alert alert-warning">All fields are required.
                        </div>
                        <%}%>
                          <%if (message & message=='3' ){%>
                            <div class="alert alert-danger">Password donot match. Please try again
                            </div>
                            <%}%>

                              <p class="text-center h1 fw-bold mb-2 mx-1 mx-md-4 mt-4">Sign up</p>

                              <br>
                              <form class="mx-1 mx-md-4" action="/register" method="POST" enctype="multipart/form-data">

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="text" id="first_name" name="first_name" class="form-control"
                                      required />
                                    <label class="form-label" for="first_name">First Name <span style="color:red"> *
                                      </span></label>
                                  </div>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="text" id="last_name" name="last_name" class="form-control" required />
                                    <label class="form-label" for="last_name">Last Name <span style="color:red"> *
                                      </span></label>
                                  </div>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-calendar-day fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="date" id="date_of_birth" name="date_of_birth" class="form-control"
                                      required />
                                    <label class="form-label" for="date_of_birth">Date of birth <span style="color:red">
                                        *
                                      </span></label>
                                  </div>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="email" id="email_id" name="email_id" class="form-control" required
                                      placeholder="abc@gmail.com" />
                                    <label class="form-label" for="email_id">Email Id <span style="color:red"> *
                                      </span></label>
                                  </div>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-phone fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="tel" id="phone_number" name="phone_number" class="form-control"
                                      placeholder="123-456-7890" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required />
                                    <label class="form-label" for="phone_number">Phone Number <span style="color:red"> *
                                      </span></label>
                                  </div>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-id-badge fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="file" id="profile_photo_url" name="profile_photo_url"
                                      class="form-control" accept="image/png, image/jpg" />
                                    <label class="form-label" for="profile_photo_url">Profile photo (jpg/png) </label>
                                  </div>
                                </div>


                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <!--<input type="password" id="password" name="password" class="form-control" required/>-->
                                    <input type="password" id="password" name="password" class="form-control"
                                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" onchange='check()'
                                      title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                                      required>
                                    <label class="form-label" for="password">Password <span style="color:red"> *
                                      </span></label>
                                  </div>
                                </div>

                                <div id="message">
                                  Password must contain the following:
                                  <p id="letter" class="invalid">A lowercase letter</p>
                                  <p id="capital" class="invalid">An uppercase letter</p>
                                  <p id="number" class="invalid">A number</p>
                                  <p id="length" class="invalid">Minimum 8 characters</p>
                                </div>

                                <div class="d-flex flex-row align-items-center mb-4">
                                  <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                                  <div class="form-outline flex-fill mb-0">
                                    <input type="password" id="passwordrepeat" name="passwordrepeat"
                                      class="form-control" onchange='check()' required />
                                    <label class="form-label" for="passwordrepeat">Repeat your password <span
                                        style="color:red"> * </span> </label>
                                  </div>
                                </div>

                                <span id='message1' style="color:red">Passwords do not match</span>
                                <br>
                                <br>


                                <div class="form-check d-flex justify-content-center mb-5">
                                  <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3c"
                                    required />
                                  <label class="form-check-label" for="form2Example3">
                                    I agree all statements in <a href="#!">Terms of service </a> <span
                                      style="color:red"> * </span>
                                  </label>
                                </div>

                                <p class="mx-1 mx-md-4 ms-5 ps-5"></p>Already have an account? &nbsp;<a
                                  href="/login">Login</a></p>
                                <br>


                                <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                  <button type="submit" class="btn btn-primary btn-lg" id="submit"
                                    disabled>Register</button>
                                </div>

                              </form>


                </div>
                <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">

                  <img src="images/register.jpeg" class="img-fluid" alt="Sample image">
                  <!--src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp"-->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>

    var myInput = document.getElementById("password");
    var myInput1 = document.getElementById("passwordrepeat");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");

    var check = function () {
      if (myInput.value == myInput1.value) {
        document.getElementById('message1').style.display = "none"
        document.getElementById("submit").disabled = false;
        //document.getElementById('message1').innerHTML = 'matching';
      } else {
        document.getElementById('message1').style.display = "block";
        //document.getElementById('message1').innerHTML = 'not matching';
      }
    }

    // When the user clicks on the password field, show the message box
    myInput.onfocus = function () {
      document.getElementById("message").style.display = "block";
    }

    myInput1.onfocus = function () {
      if (myInput.value == myInput1.value) {
        document.getElementById('message1').style.display = "none"
        document.getElementById("submit").disabled = false;
      } else {
        document.getElementById('message1').style.display = "block";
      }
    }

    // When the user clicks outside of the password field, hide the message box
    myInput.onblur = function () {
      document.getElementById("message").style.display = "none";
    }


    // When the user starts to type something inside the password field
    myInput.onkeyup = function () {
      // Validate lowercase letters
      var lowerCaseLetters = /[a-z]/g;
      if (myInput.value.match(lowerCaseLetters)) {
        letter.classList.remove("invalid");
        letter.classList.add("valid");
      } else {
        letter.classList.remove("valid");
        letter.classList.add("invalid");
      }

      // Validate capital letters
      var upperCaseLetters = /[A-Z]/g;
      if (myInput.value.match(upperCaseLetters)) {
        capital.classList.remove("invalid");
        capital.classList.add("valid");
      } else {
        capital.classList.remove("valid");
        capital.classList.add("invalid");
      }

      // Validate numbers
      var numbers = /[0-9]/g;
      if (myInput.value.match(numbers)) {
        number.classList.remove("invalid");
        number.classList.add("valid");
      } else {
        number.classList.remove("valid");
        number.classList.add("invalid");
      }

      // Validate length
      if (myInput.value.length >= 8) {
        length.classList.remove("invalid");
        length.classList.add("valid");
      } else {
        length.classList.remove("valid");
        length.classList.add("invalid");
      }
      if (myInput.value == myInput1.value) {
        document.getElementById('message1').style.display = "none";
        document.getElementById("submit").disabled = false;
      } else {
        document.getElementById('message1').style.display = "block";
      }

    }

    myInput1.onkeyup = function () {
      if (myInput.value == myInput1.value) {
        document.getElementById('message1').style.display = "none";
        document.getElementById("submit").disabled = false;
      } else {
        document.getElementById('message1').style.display = "block";
      }

    }


    document.getElementById("submit").addEventListener("click", function showFileSize() {
      if (!window.FileReader) { // This is VERY unlikely, browser support is near-universal
        //console.log("The file API isn't supported on this browser yet.");
        return;
      }

      var input = document.getElementById('profile_photo_url');
      if (!input.files) { // This is VERY unlikely, browser support is near-universal
        console.error("This browser doesn't seem to support the `files` property of file inputs.");
      } else if (!input.files[0]) {
        addPara("Please select a file before clicking 'Load'");
      } else {
        var file = input.files[0];
        addPara("File " + file.name + " is " + file.size + " bytes in size");
      }
    });

    function addPara(text) {
      var p = document.createElement("p");
      p.textContent = text;
      document.body.appendChild(p);
    }

  </script>


  <%- include('partials/footer') %>